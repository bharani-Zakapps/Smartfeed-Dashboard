import{a as X,b as ee}from"./chunk-E6SJXISO.js";import{a as q}from"./chunk-QHF5QHHV.js";import{b as Y}from"./chunk-3PAH6ZTW.js";import{b as E,h as I,o as J}from"./chunk-WXCCY3CZ.js";import{b as $,c as G,d as K,e as Z}from"./chunk-KW4TUBHV.js";import{$ as f,$a as W,A as T,B as p,E as v,G as O,H as M,M as N,Ma as a,N as D,Na as F,Oa as h,Pa as P,Qa as B,Ra as V,Va as L,Wa as H,X as s,Xa as j,aa as g,ea as u,fa as A,kb as U,lb as R,mb as Q,pa as c,pb as b,qa as r,ra as o,sa as _,wa as z,ya as y,za as m}from"./chunk-7UYGC665.js";import"./chunk-2VMXMS7J.js";var te=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=g({type:t});static \u0275inj=p({})}return t})(),ce=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=g({type:t});static \u0275inj=p({imports:[E,te,E,te]})}return t})();var de=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=g({type:t});static \u0275inj=p({imports:[ce]})}return t})();var ue=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=g({type:t});static \u0275inj=p({imports:[I,de,I]})}return t})();function Re(t,n){if(t&1&&(r(0,"th",3),a(1),o()),t&2){let e=n.$implicit;s(),h(" ",e," ")}}function be(t,n){if(t&1&&(r(0,"td",7),a(1),o()),t&2){let e=n.$implicit;s(),h(" ",e," ")}}function Se(t,n){if(t&1&&(r(0,"tr")(1,"td",6),a(2),o(),r(3,"td",7),a(4),o(),u(5,be,2,1,"td",8),r(6,"td",7),a(7),o(),r(8,"td",7),_(9,"img",9),o()()),t&2){let e=n.$implicit;s(2),h(" ",e.division," "),s(2),h(" ",e.client," "),s(),c("ngForOf",e.competitors),s(2),h(" ",e.keywords," ")}}var S=class t{displayedColumns=[];tableData=[];currentPath=window.location.pathname.replace("/Smartfeed-Dashboard","");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-table"]],inputs:{displayedColumns:"displayedColumns",tableData:"tableData"},decls:16,vars:5,consts:[[1,"table-responsive","overflow-auto"],[1,"w-full","table-fixed","border-collapse","bg-white"],[1,"px-3","py-2","text-left","font-medium","w-[150px]"],[1,"px-3","py-2","text-right","font-medium","w-[100px]"],["class","px-3 py-2 text-right font-medium w-[100px]",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"px-3","py-2","text-left","border-t","w-[150px]"],[1,"px-3","py-2","text-right","border-t","w-[100px]"],["class","px-3 py-2 text-right border-t w-[100px]",4,"ngFor","ngForOf"],["src","images/download.png","alt","trend",1,"w-[13px]","h-[13px]","inline-block"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),a(5,"Division"),o(),r(6,"th",3),a(7),H(8,"firstLetterUppercase"),o(),u(9,Re,2,1,"th",4),r(10,"th",3),a(11,"Keywords"),o(),r(12,"th",3),a(13,"D/L"),o()()(),r(14,"tbody"),u(15,Se,10,4,"tr",5),o()()()),e&2&&(s(7),h(" ",j(8,3,i.displayedColumns.clientName)," "),s(2),c("ngForOf",i.displayedColumns.competitors),s(6),c("ngForOf",i.tableData))},dependencies:[b,R,ue,X],styles:[".mat-mdc-header-row,   .mat-mdc-row,   .mat-mdc-footer-row{font-family:Inter,sans-serif!important;height:36px!important}  .mat-mdc-header-cell,   .mat-mdc-cell,   .mat-mdc-footer-cell{border-color:#e8e8e8!important;height:36px!important;padding:0 10px!important;white-space:nowrap}  .mat-mdc-header-cell:last-child,   .mat-mdc-cell:last-child,   .mat-mdc-footer-cell:last-child{width:100%;text-align:left!important;padding:0 40px!important}"]})};var ke=(t,n,e)=>({"bg-[#ACDAFF] border border-[#3BB1FF]":t,"hover:bg-transparent text-gray-400":n,"hover:bg-transparent":e});function xe(t,n){if(t&1&&(r(0,"h3",7),a(1),o()),t&2){let e=m();s(),F(e.title)}}function Te(t,n){t&1&&(r(0,"div",8)(1,"span"),a(2,"Keyword"),o(),r(3,"span"),a(4,"Search Vol."),o()())}function Fe(t,n){t&1&&(r(0,"div",9)(1,"span"),a(2,"Keyword"),o()())}function Ee(t,n){t&1&&_(0,"img",15)}function Ie(t,n){if(t&1&&(r(0,"span"),a(1),o()),t&2){let e=m(2).$implicit;s(),h(" ",e.volume," ")}}function Oe(t,n){if(t&1&&(r(0,"span",12),u(1,Ee,1,0,"img",13)(2,Ie,2,1,"span",14),o()),t&2){let e=m().$implicit,i=m();s(),c("ngIf",i.selectedItem.indexOf(e.keyword||e.name||e)>=0),s(),c("ngIf",i.selectedItem.indexOf(e.keyword||e.name||e)<0)}}function Me(t,n){if(t&1){let e=z();r(0,"li",10),y("click",function(){let d=O(e).$implicit,l=m();return M(l.onSelect(d))}),r(1,"span"),a(2),o(),u(3,Oe,3,2,"span",11),o()}if(t&2){let e=n.$implicit,i=m();c("ngClass",L(3,ke,i.selectedItem.indexOf(e.departmentId||e.name||e)>=0,i.selectedItem.indexOf(e.departmentId||e.name||e)<0&&i.selectedItem.length>=3,i.selectedItem.indexOf(e.departmentId||e.name||e)<0&&i.selectedItem.length<3)),s(2),F(e.departmentName||e.name||e),s(),c("ngIf",e.volume)}}var k=class t{title="";items=[];placeholder="Search...";chipKeywords=[];selectedItem=[];seletedItemsArray=[];searchValue="";filteredItems=[];itemSelected=new A;currentPath=window.location.pathname.replace("/Smartfeed-Dashboard","");ngOnInit(){this.filteredItems=[...this.items],this.setDefaultSelection()}ngOnChanges(n){n.chipKeywords&&this.chipKeywords&&this.chipKeywords.length>0&&(this.seletedItemsArray=this.chipKeywords,this.selectedItem=this.chipKeywords.map(e=>e.keyword)),n.items&&this.items.length>0&&(this.filteredItems=[...this.items],this.setDefaultSelection())}setDefaultSelection(){let n=this.currentPath;if(console.log("Current Path:",n),this.items.length>0&&this.selectedItem.length===0&&!n.includes("/keyword-tracker")){let e=this.items[0];this.selectedItem=[e.departmentId],this.seletedItemsArray=[e],this.itemSelected.emit(this.seletedItemsArray)}}onSelect(n){let e=window.location.pathname.replace("/Smartfeed-Dashboard",""),i=n.departmentId||n.name||n,d=this.selectedItem.indexOf(i);e.includes("/keyword-tracker")?this.selectedItem.length<3&&this.selectedItem.indexOf(i)<0?(this.selectedItem.push(i),this.seletedItemsArray.push(n),this.itemSelected.emit(this.seletedItemsArray)):d>=0&&(this.selectedItem.splice(d,1),this.seletedItemsArray.splice(d,1),this.itemSelected.emit(this.seletedItemsArray)):(this.selectedItem=[i],this.seletedItemsArray=[n],this.itemSelected.emit(this.seletedItemsArray))}onSearch(){let n=this.searchValue.toLowerCase();this.filteredItems=this.items.filter(e=>e.departmentName?.toLowerCase().includes(n)||String(e).toLowerCase().includes(n))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-sidenav"]],inputs:{title:"title",items:"items",placeholder:"placeholder",chipKeywords:"chipKeywords"},outputs:{itemSelected:"itemSelected"},features:[D],decls:7,vars:6,consts:[[1,"w-72","bg-gray-100","gap-4","flex","flex-col"],["type","text",1,"border","p-2","rounded","w-full","mb-2",3,"ngModelChange","input","ngModel","placeholder"],["class","mb-2 font-semibold",4,"ngIf"],["class","flex justify-between font-medium text-sm pl-[10px] pr-[10px]",4,"ngIf"],["class","font-medium text-sm pl-[10px] pr-[10px]",4,"ngIf"],[1,"flex","flex-col","justify-between","font-semibold","text-sm","pb-1","mb-2","gap-1"],["class","cursor-pointer items-center rounded flex justify-between h-[30px] p-[10px] font-normal",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mb-2","font-semibold"],[1,"flex","justify-between","font-medium","text-sm","pl-[10px]","pr-[10px]"],[1,"font-medium","text-sm","pl-[10px]","pr-[10px]"],[1,"cursor-pointer","items-center","rounded","flex","justify-between","h-[30px]","p-[10px]","font-normal",3,"click","ngClass"],["class","text-gray-500 text-sm",4,"ngIf"],[1,"text-gray-500","text-sm"],["src","images/closeSvg.svg","alt","remove","class","inline-block w-[10px] h-[10px] cursor-pointer",4,"ngIf"],[4,"ngIf"],["src","images/closeSvg.svg","alt","remove",1,"inline-block","w-[10px]","h-[10px]","cursor-pointer"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"input",1),V("ngModelChange",function(l){return B(i.searchValue,l)||(i.searchValue=l),l}),y("input",function(){return i.onSearch()}),o(),u(2,xe,2,1,"h3",2)(3,Te,5,0,"div",3)(4,Fe,3,0,"div",4),r(5,"ul",5),u(6,Me,4,7,"li",6),o()()),e&2&&(s(),P("ngModel",i.searchValue),c("placeholder",i.placeholder),s(),c("ngIf",i.title),s(),c("ngIf",i.currentPath.includes("/keyword-tracker")),s(),c("ngIf",i.currentPath.includes("/position-visibility")),s(2),c("ngForOf",i.filteredItems))},dependencies:[b,U,R,Q,Z,$,G,K],encapsulation:2})};var x=class t{api=v(Y);getDepartmentsByRegion(n,e){return this.api.get("/department-by-region",{clientId:n,regionId:e})}getCompetitorHeader(n,e,i){return this.api.get("/competitor-header-by-department",{clientId:n,regionId:e,departmentId:i})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})};var fe=class t{currentValue=0;currentHighValue;tableHeader=[];data=[{division:"Bakugan",client:58.3,competitors:[58.23,67.92,67.92],keywords:200},{division:"Goo Jit Zu",client:58.3,competitors:[58.23,67.92,67.92],keywords:400}];ngOnInit(){}departmentApi=v(x);clientData=v(ee);onCategorySelect(n){let e=this.clientData?.clientInfo(),i=this.clientData?.selectedRegion(),d=e?.clientId;if(!i)return;let l=i.regionId;this.departmentApi.getCompetitorHeader(d,l,n[0].departmentId).subscribe(C=>{C.success&&(this.tableHeader=C.data)})}handleChildValue(n,e){this.currentValue=n,this.currentHighValue=e,console.log("Received value from child",n,"High value:",e)}departments=N([]);constructor(){W(()=>{let n=this.clientData?.clientInfo(),e=this.clientData?.selectedRegion(),i=n?.clientId;if(!i||!e)return;let d=e.regionId;d&&this.departmentApi.getDepartmentsByRegion(i,d).subscribe(l=>{l.success&&(this.departments.set(l.data),this.departmentApi.getCompetitorHeader(i,d,l.data[0].departmentId).subscribe(C=>{C.success&&(this.tableHeader=C.data)}))})})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-competitors"]],decls:6,vars:4,consts:[[1,"flex","gap-5","p-5"],[3,"itemSelected","items","placeholder"],[1,"flex","flex-col","gap-5","bg-white","py-10","px-7","w-full"],[3,"childValueChange"],[3,"displayedColumns","tableData"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"app-sidenav",1),y("itemSelected",function(l){return i.onCategorySelect(l)}),o(),r(2,"div",2),_(3,"app-month-view"),r(4,"app-slider",3),y("childValueChange",function(l){return i.handleChildValue(l.value,l.highValue??l.value)}),o(),_(5,"app-table",4),o()()),e&2&&(s(),c("items",i.departments())("placeholder","Select department"),s(4),c("displayedColumns",i.tableHeader)("tableData",i.data))},dependencies:[S,k,q,J],encapsulation:2})};export{fe as Competitors};
